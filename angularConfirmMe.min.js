!function(n,o){o.module("angularConfirmMe",[]).factory("ConfirmMe",["$rootScope","$timeout",function(n,e){function i(n,o){for(var e in o)try{n[e]=o[e].constructor==Object?i(n[e],o[e]):o[e]}catch(r){n[e]=o[e]}return n}function r(n,o,e){null==o&&(o=function(){return!0});var i=[],r=n.length,t=0;for(t;r>t;t++){var c=n[t],f=o(c,t);f&&(i.push(c),"function"==typeof e&&e(c,t))}return i}function t(n){var o={},e={message:"Are you sure you want to do this?",onConfirm:function(){},onCancel:function(){},onClose:function(){}};if("undefined"!=typeof n.message){var r=e.message;try{r=n.message.trim()}catch(t){throw new ReferenceError("ConfirmMe invalid type for feild: Message which should be String")}finally{if(""==r)throw new ReferenceError("Notifyme empty required feild: Message(String)")}}return o.id=Math.floor(999999999*Math.random()),o=i(e,i(o,n))}function c(n){var o=r(a,function(o){return o.id===parseInt(n)});return o.length>0?o[0]:[]}function f(n){return o.element(document.querySelector("#confirme-"+n))}function l(o){u===!0&&(u=!1,r(a,function(n){return n.id===parseInt(o)},function(i,r){f(o).removeClass("is-visible"),e(function(){a.splice(r,1),n.$broadcast("confirmations:updated"),u=!0,i.onClose()},300)}))}var a=[],u=!0;return{getConfirmations:function(){return a},confirm:function(o){o="undefined"==typeof o?{}:o;var i=t(o);a.push(i),n.$broadcast("confirmations:updated"),e(function(){f(i.id).addClass("is-visible")},50)},cancel:function(n){c(n).onCancel(),l(n)},confirmed:function(n){c(n).onConfirm(),l(n)},close:function(){l.apply(this,arguments)}}}]).controller("ConfirmMeController",["$scope","ConfirmMe",function(n,o){n.confirmations=o.getConfirmations(),n.close=o.close,n.confirm=o.confirmed,n.cancel=o.cancel,n.$on("confirmations:updated",function(){n.confirmations=o.getConfirmations()})}]).directive("confirmme",["ConfirmMe",function(n){return{restrict:"AE",replace:!0,template:"<div id='confirmMe-wrapper'><div ng-controller='ConfirmMeController'><div ng-repeat='conf in confirmations' id='confirme-{{ conf.id }}' class='confirme-popup' role='alert'><div class='confirme-popup-container'><p>{{ conf.message }}</p><ul class='confirme-buttons list-inline m-n p-b p-l p-r'><li><a class='btn btn-md rounded w-xs pull-right confirme-popup-confirm' ng-click='confirm(conf.id)'>Yes</a></li><li><a class='btn btn-md rounded w-xs pull-left confirme-popup-cancel' ng-click='cancel(conf.id)'>No</a></li></ul><a class='confirme-popup-close' ng-click='close(conf.id)'></a></div></div></div></div>",link:function(){console.log("working"),o.element(document).on("keydown",function(){var o=document.querySelectorAll(".confirme-popup.is-visible");if(o.length>0){var e=o[o.length-1].getAttribute("id").split("-")[1];n.close(e)}})}}}])}(window,window.angular);